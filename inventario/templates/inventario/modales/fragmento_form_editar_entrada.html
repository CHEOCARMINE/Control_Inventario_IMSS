{% csrf_token %}

{% if form_entrada.non_field_errors %}
    <div class="alert alert-danger">
        {{ form_entrada.non_field_errors }}
    </div>
{% endif %}

<!-- Cabecera editable -->
<div class="form-row mb-3">
    <div class="col-md-6">
        <div class="form-group">
        <label for="{{ form_entrada.folio.id_for_label }}">Folio</label>
        {{ form_entrada.folio }}
        {% for err in form_entrada.folio.errors %}
            <div class="text-danger small">{{ err }}</div>
        {% endfor %}
        </div>
    </div>
    <div class="col-md-6">
        <div class="form-group">
        <label for="{{ form_entrada.fecha_recepcion.id_for_label }}">Fecha de Recepción</label>
        {{ form_entrada.fecha_recepcion }}
        {% for err in form_entrada.fecha_recepcion.errors %}
            <div class="text-danger small">{{ err }}</div>
        {% endfor %}
        </div>
    </div>
</div>

<hr>

<!-- Sólo lectura: líneas de esta entrada -->
<h6>Productos asociados</h6>
<div class="table-responsive">
    <table class="table table-sm table-bordered">
        <thead class="thead-light">
        <tr>
            <th>Producto</th>
            <th>Marca</th>
            <th>Color</th>
            <th>Modelo</th>
            <th>N.º Serie</th>
            <th>Cantidad</th>
        </tr>
        </thead>
        <tbody>
        {% for linea in lineas %}
        <tr>
            <td>{{ linea.producto.nombre }}</td>
            <td>{{ linea.producto.marca.nombre }}</td>
            <td>{{ linea.producto.color }}</td>
            <td>{{ linea.producto.modelo }}</td>
            <td>{{ linea.producto.numero_serie|default:"—" }}</td>
            <td>{{ linea.cantidad }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>