<div class="modal-header">
  <h5 class="modal-title">Agregar Departamento</h5>
  <button type="button" class="close" data-dismiss="modal">&times;</button>
</div>

<div class="modal-body" id="modal-body-form">
  {% include 'solicitantes/modales/fragmento_form_departamento.html' %}
</div>

<script>
  function bindFormDepartamento() {
    $('#form-departamento').on('submit', function(e) {
      e.preventDefault();
      $.ajax({
        type: 'POST',
        url: "{% url 'departamentos_agregar' %}",
        data: $(this).serialize(),
        success: function(response) {
          if (response.success) {
            $('#modal').modal('hide');
            location.reload();
          } else {
            $('#modal-body-form').html(response.html_form);
            bindFormDepartamento(); // volver a vincular el evento
          }
        }
      });
    });
  }

  bindFormDepartamento();
</script>
